ù
çD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
options7 >
.> ?
UseMySql? G
(G H
builderH O
.O P
ConfigurationP ]
.] ^
GetConnectionString^ q
(q r
$str	r Ö
)
Ö Ü
,
Ü á
ServerVersion 
. 

AutoDetect 
( 
( 
builder %
.% &
Configuration& 3
.3 4
GetConnectionString4 G
(G H
$strH [
)[ \
)\ ]
)] ^
)^ _
)_ `
;` a
builder

 
.

 
Services

 
.

 #
AddControllersWithViews

 (
(

( )
)

) *
;

* +
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
! 
app 
. 	
Environment	 
. 
IsDevelopment "
(" #
)# $
)$ %
{ 
app 
. 
UseExceptionHandler 
( 
$str )
)) *
;* +
app 
. 
UseHsts 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseStaticFiles 
( 
) 
; 
app 
. 

UseRouting 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllerRoute 
( 
name 
: 	
$str
 
, 
pattern 
: 
$str 5
)5 6
;6 7
app!! 
.!! 
Run!! 
(!! 
)!! 	
;!!	 
ˆ
îD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Patient.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
Patient 
{ 
[ 
Key 
] 	
public 

required 
int 
	PatientId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public

 

string

 
?

 
PatientName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
public 

string 
? 
PatientEmail 
{  !
get" %
;% &
set' *
;* +
}, -
public 

int 
? 
PatientPhone 
{ 
get "
;" #
set$ '
;' (
}) *
public 

DateOnly 
? 

PatientDob 
{  !
get" %
;% &
set' *
;* +
}, -
public 

string 
? 
PatientGender  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

virtual 
Appointment 
? 
Appointment  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
} ˇ
õD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\ErrorViewModel.cs
	namespace 	
AppointmentManager
 
. 
Models #
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
} 
}		 ò

ìD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Doctor.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
Doctor 
{ 
[ 
Key 
] 	
public 

required 
int 
DoctorId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public

 

string

 
?

 

DoctorName

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 

string 
? 
Specialization !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

string 
? 
Availability 
{  !
get" %
;% &
set' *
;* +
}, -
public 

virtual 
Appointment 
? 
Appointment  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
} ∑
òD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Appointment.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
Appointment  
{ 
[ 
Key 
] 	
public 

required 
int 
AppointmentId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public

 

int

 
?

 
	PatientId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 

int 
? 
DoctorId 
{ 
get 
; 
set  #
;# $
}% &
public 

DateOnly 
? 
DateofAppoint "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

TimeOnly 
? 
TimeofAppoint "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

string 
? 
StatusofAppoint "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

virtual 
Doctor 
? 
Doctor !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

virtual 
Patient 
? 
Patient #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} èE
óD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Data\AppDbContext.cs
	namespace 	
AppointmentManager
 
. 
Data !
;! "
public 
partial 
class 
AppDbContext !
:" #
	DbContext$ -
{ 
public 

AppDbContext 
( 
) 
{		 
} 
public 

AppDbContext 
( 
DbContextOptions (
<( )
AppDbContext) 5
>5 6
options7 >
)> ?
: 	
base
 
( 
options 
) 
{ 
} 
public 

virtual 
DbSet 
< 
Appointment $
>$ %
Appointments& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 

virtual 
DbSet 
< 
Doctor 
>  
Doctors! (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 

virtual 
DbSet 
< 
Patient  
>  !
Patients" *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
	protected 
override 
void 
OnConfiguring )
() *#
DbContextOptionsBuilder* A
optionsBuilderB P
)P Q
=> 

optionsBuilder 
. 
UseMySql "
(" #
$str# k
,k l
ServerVersionm z
.z {
Parse	{ Ä
(
Ä Å
$str
Å è
)
è ê
)
ê ë
;
ë í
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{ 
modelBuilder 
. 
UseCollation 
( 
$str .
). /
.   

HasCharSet   
(   
$str   !
)  ! "
;  " #
modelBuilder"" 
."" 
Entity"" 
<"" 
Appointment"" '
>""' (
(""( )
entity"") /
=>""0 2
{## 	
entity$$ 
.$$ 
HasKey$$ 
($$ 
e$$ 
=>$$ 
e$$  
.$$  !
AppointmentId$$! .
)$$. /
.$$/ 0
HasName$$0 7
($$7 8
$str$$8 A
)$$A B
;$$B C
entity&& 
.&& 
ToTable&& 
(&& 
$str&& )
)&&) *
;&&* +
entity(( 
.(( 
HasIndex(( 
((( 
e(( 
=>((  
e((! "
.((" #
DoctorId((# +
,((+ ,
$str((- 7
)((7 8
.((8 9
IsUnique((9 A
(((A B
)((B C
;((C D
entity** 
.** 
HasIndex** 
(** 
e** 
=>**  
e**! "
.**" #
	PatientId**# ,
,**, -
$str**. 9
)**9 :
.**: ;
IsUnique**; C
(**C D
)**D E
;**E F
entity,, 
.,, 
Property,, 
(,, 
e,, 
=>,,  
e,,! "
.,," #
StatusofAppoint,,# 2
),,2 3
.,,3 4
HasMaxLength,,4 @
(,,@ A
$num,,A C
),,C D
;,,D E
entity-- 
.-- 
Property-- 
(-- 
e-- 
=>--  
e--! "
.--" #
TimeofAppoint--# 0
)--0 1
.--1 2
HasColumnType--2 ?
(--? @
$str--@ F
)--F G
;--G H
entity// 
.// 
HasOne// 
(// 
d// 
=>// 
d//  
.//  !
Doctor//! '
)//' (
.//( )
WithOne//) 0
(//0 1
p//1 2
=>//3 5
p//6 7
.//7 8
Appointment//8 C
)//C D
.00 
HasForeignKey00 
<00 
Appointment00 *
>00* +
(00+ ,
d00, -
=>00. 0
d001 2
.002 3
DoctorId003 ;
)00; <
.11 
HasConstraintName11 "
(11" #
$str11# 8
)118 9
;119 :
entity33 
.33 
HasOne33 
(33 
d33 
=>33 
d33  
.33  !
Patient33! (
)33( )
.33) *
WithOne33* 1
(331 2
p332 3
=>334 6
p337 8
.338 9
Appointment339 D
)33D E
.44 
HasForeignKey44 
<44 
Appointment44 *
>44* +
(44+ ,
d44, -
=>44. 0
d441 2
.442 3
	PatientId443 <
)44< =
.55 
HasConstraintName55 "
(55" #
$str55# 8
)558 9
;559 :
}66 	
)66	 

;66
 
modelBuilder88 
.88 
Entity88 
<88 
Doctor88 "
>88" #
(88# $
entity88$ *
=>88+ -
{99 	
entity:: 
.:: 
HasKey:: 
(:: 
e:: 
=>:: 
e::  
.::  !
DoctorId::! )
)::) *
.::* +
HasName::+ 2
(::2 3
$str::3 <
)::< =
;::= >
entity<< 
.<< 
ToTable<< 
(<< 
$str<< $
)<<$ %
;<<% &
entity>> 
.>> 
Property>> 
(>> 
e>> 
=>>>  
e>>! "
.>>" #
Availability>># /
)>>/ 0
.>>0 1
HasMaxLength>>1 =
(>>= >
$num>>> @
)>>@ A
;>>A B
entity?? 
.?? 
Property?? 
(?? 
e?? 
=>??  
e??! "
.??" #

DoctorName??# -
)??- .
.??. /
HasMaxLength??/ ;
(??; <
$num??< >
)??> ?
;??? @
entity@@ 
.@@ 
Property@@ 
(@@ 
e@@ 
=>@@  
e@@! "
.@@" #
Specialization@@# 1
)@@1 2
.@@2 3
HasMaxLength@@3 ?
(@@? @
$num@@@ C
)@@C D
;@@D E
}AA 	
)AA	 

;AA
 
modelBuilderCC 
.CC 
EntityCC 
<CC 
PatientCC #
>CC# $
(CC$ %
entityCC% +
=>CC, .
{DD 	
entityEE 
.EE 
HasKeyEE 
(EE 
eEE 
=>EE 
eEE  
.EE  !
	PatientIdEE! *
)EE* +
.EE+ ,
HasNameEE, 3
(EE3 4
$strEE4 =
)EE= >
;EE> ?
entityGG 
.GG 
ToTableGG 
(GG 
$strGG %
)GG% &
;GG& '
entityII 
.II 
PropertyII 
(II 
eII 
=>II  
eII! "
.II" #
PatientPhoneII# /
)II/ 0
.II0 1
HasMaxLengthII1 =
(II= >
$numII> @
)II@ A
;IIA B
entityJJ 
.JJ 
PropertyJJ 
(JJ 
eJJ 
=>JJ  
eJJ! "
.JJ" #
PatientEmailJJ# /
)JJ/ 0
.JJ0 1
HasMaxLengthJJ1 =
(JJ= >
$numJJ> @
)JJ@ A
;JJA B
entityKK 
.KK 
PropertyKK 
(KK 
eKK 
=>KK  
eKK! "
.KK" #
PatientGenderKK# 0
)KK0 1
.KK1 2
HasMaxLengthKK2 >
(KK> ?
$numKK? A
)KKA B
;KKB C
entityLL 
.LL 
PropertyLL 
(LL 
eLL 
=>LL  
eLL! "
.LL" #
PatientNameLL# .
)LL. /
.LL/ 0
HasMaxLengthLL0 <
(LL< =
$numLL= ?
)LL? @
;LL@ A
}MM 	
)MM	 

;MM
 "
OnModelCreatingPartialOO 
(OO 
modelBuilderOO +
)OO+ ,
;OO, -
}PP 
partialRR 
voidRR "
OnModelCreatingPartialRR '
(RR' (
ModelBuilderRR( 4
modelBuilderRR5 A
)RRA B
;RRB C
}SS ÓR
£D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\PatientController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
PatientController "
:# $

Controller% /
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
public 
PatientController  
(  !
AppDbContext! -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
View 
( 
await 
_context &
.& '
Patients' /
./ 0
ToListAsync0 ;
(; <
)< =
)= >
;> ?
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if 
( 
id 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
} 
var 
patient 
= 
await 
_context  (
.( )
Patients) 1
.   
FirstOrDefaultAsync   $
(  $ %
m  % &
=>  ' )
m  * +
.  + ,
	PatientId  , 5
==  6 8
id  9 ;
)  ; <
;  < =
if!! 
(!! 
patient!! 
==!! 
null!! 
)!!  
{"" 
return## 
NotFound## 
(##  
)##  !
;##! "
}$$ 
return&& 
View&& 
(&& 
patient&& 
)&&  
;&&  !
}'' 	
public** 
IActionResult** 
Create** #
(**# $
)**$ %
{++ 	
return,, 
View,, 
(,, 
),, 
;,, 
}-- 	
[22 	
HttpPost22	 
]22 
[33 	$
ValidateAntiForgeryToken33	 !
]33! "
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
Create44) /
(44/ 0
[440 1
Bind441 5
(445 6
$str	446 Ä
)
44Ä Å
]
44Å Ç
Patient
44É ä
patient
44ã í
)
44í ì
{55 	
if66 
(66 

ModelState66 
.66 
IsValid66 "
)66" #
{77 
if99 
(99 
patient99 
.99 
PatientGender99 )
==99* ,
$str99- /
||990 2
patient993 :
.99: ;
PatientGender99; H
==99I K
null99L P
)99P Q
{99R S
return:: 
RedirectToAction:: +
(::+ ,
nameof::, 2
(::2 3
Create::3 9
)::9 :
)::: ;
;::; <
};; 
_context== 
.== 
Add== 
(== 
patient== $
)==$ %
;==% &
await>> 
_context>> 
.>> 
SaveChangesAsync>> /
(>>/ 0
)>>0 1
;>>1 2
return?? 
RedirectToAction?? '
(??' (
nameof??( .
(??. /
Index??/ 4
)??4 5
)??5 6
;??6 7
}@@ 
returnAA 
ViewAA 
(AA 
patientAA 
)AA  
;AA  !
}BB 	
publicEE 
asyncEE 
TaskEE 
<EE 
IActionResultEE '
>EE' (
EditEE) -
(EE- .
intEE. 1
?EE1 2
idEE3 5
)EE5 6
{FF 	
ifGG 
(GG 
idGG 
==GG 
nullGG 
)GG 
{HH 
returnII 
NotFoundII 
(II  
)II  !
;II! "
}JJ 
varLL 
patientLL 
=LL 
awaitLL 
_contextLL  (
.LL( )
PatientsLL) 1
.LL1 2
	FindAsyncLL2 ;
(LL; <
idLL< >
)LL> ?
;LL? @
ifMM 
(MM 
patientMM 
==MM 
nullMM 
)MM  
{NN 
returnOO 
NotFoundOO 
(OO  
)OO  !
;OO! "
}PP 
returnQQ 
ViewQQ 
(QQ 
patientQQ 
)QQ  
;QQ  !
}RR 	
[WW 	
HttpPostWW	 
]WW 
[XX 	$
ValidateAntiForgeryTokenXX	 !
]XX! "
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (
EditYY) -
(YY- .
intYY. 1
idYY2 4
,YY4 5
[YY6 7
BindYY7 ;
(YY; <
$str	YY< Ü
)
YYÜ á
]
YYá à
Patient
YYâ ê
patient
YYë ò
)
YYò ô
{ZZ 	
if[[ 
([[ 
id[[ 
!=[[ 
patient[[ 
.[[ 
	PatientId[[ '
)[[' (
{\\ 
return]] 
NotFound]] 
(]]  
)]]  !
;]]! "
}^^ 
if`` 
(`` 

ModelState`` 
.`` 
IsValid`` "
)``" #
{aa 
trybb 
{cc 
ifee 
(ee 
patientee 
.ee  
PatientGenderee  -
==ee. 0
$stree1 3
||ee4 6
patientee7 >
.ee> ?
PatientGenderee? L
==eeM O
nulleeP T
)eeT U
{ff 
returngg 
RedirectToActiongg /
(gg/ 0
nameofgg0 6
(gg6 7
Editgg7 ;
)gg; <
)gg< =
;gg= >
}hh 
_contextjj 
.jj 
Updatejj #
(jj# $
patientjj$ +
)jj+ ,
;jj, -
awaitkk 
_contextkk "
.kk" #
SaveChangesAsynckk# 3
(kk3 4
)kk4 5
;kk5 6
}ll 
catchmm 
(mm (
DbUpdateConcurrencyExceptionmm 3
)mm3 4
{nn 
ifoo 
(oo 
!oo 
PatientExistsoo &
(oo& '
patientoo' .
.oo. /
	PatientIdoo/ 8
)oo8 9
)oo9 :
{pp 
returnqq 
NotFoundqq '
(qq' (
)qq( )
;qq) *
}rr 
elsess 
{tt 
throwuu 
;uu 
}vv 
}ww 
returnxx 
RedirectToActionxx '
(xx' (
nameofxx( .
(xx. /
Indexxx/ 4
)xx4 5
)xx5 6
;xx6 7
}yy 
returnzz 
Viewzz 
(zz 
patientzz 
)zz  
;zz  !
}{{ 	
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Delete~~) /
(~~/ 0
int~~0 3
?~~3 4
id~~5 7
)~~7 8
{ 	
if
ÄÄ 
(
ÄÄ 
id
ÄÄ 
==
ÄÄ 
null
ÄÄ 
)
ÄÄ 
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 
patient
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_context
ÖÖ  (
.
ÖÖ( )
Patients
ÖÖ) 1
.
ÜÜ !
FirstOrDefaultAsync
ÜÜ $
(
ÜÜ$ %
m
ÜÜ% &
=>
ÜÜ' )
m
ÜÜ* +
.
ÜÜ+ ,
	PatientId
ÜÜ, 5
==
ÜÜ6 8
id
ÜÜ9 ;
)
ÜÜ; <
;
ÜÜ< =
if
áá 
(
áá 
patient
áá 
==
áá 
null
áá 
)
áá  
{
àà 
return
ââ 
NotFound
ââ 
(
ââ  
)
ââ  !
;
ââ! "
}
ää 
return
åå 
View
åå 
(
åå 
patient
åå 
)
åå  
;
åå  !
}
çç 	
[
êê 	
HttpPost
êê	 
,
êê 

ActionName
êê 
(
êê 
$str
êê &
)
êê& '
]
êê' (
[
ëë 	&
ValidateAntiForgeryToken
ëë	 !
]
ëë! "
public
íí 
async
íí 
Task
íí 
<
íí 
IActionResult
íí '
>
íí' (
DeleteConfirmed
íí) 8
(
íí8 9
int
íí9 <
id
íí= ?
)
íí? @
{
ìì 	
var
îî 
patient
îî 
=
îî 
await
îî 
_context
îî  (
.
îî( )
Patients
îî) 1
.
îî1 2
	FindAsync
îî2 ;
(
îî; <
id
îî< >
)
îî> ?
;
îî? @
if
ïï 
(
ïï 
patient
ïï 
!=
ïï 
null
ïï 
)
ïï  
{
ññ 
_context
óó 
.
óó 
Patients
óó !
.
óó! "
Remove
óó" (
(
óó( )
patient
óó) 0
)
óó0 1
;
óó1 2
}
òò 
await
öö 
_context
öö 
.
öö 
SaveChangesAsync
öö +
(
öö+ ,
)
öö, -
;
öö- .
return
õõ 
RedirectToAction
õõ #
(
õõ# $
nameof
õõ$ *
(
õõ* +
Index
õõ+ 0
)
õõ0 1
)
õõ1 2
;
õõ2 3
}
úú 	
private
ûû 
bool
ûû 
PatientExists
ûû "
(
ûû" #
int
ûû# &
id
ûû' )
)
ûû) *
{
üü 	
return
†† 
_context
†† 
.
†† 
Patients
†† $
.
††$ %
Any
††% (
(
††( )
e
††) *
=>
††+ -
e
††. /
.
††/ 0
	PatientId
††0 9
==
††: <
id
††= ?
)
††? @
;
††@ A
}
°° 	
}
¢¢ 
}££ ƒ
†D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\HomeController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
ILogger		  
<		  !
HomeController		! /
>		/ 0
_logger		1 8
;		8 9
public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
)< =
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Privacy $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public 
IActionResult 
Error "
(" #
)# $
{ 	
return 
View 
( 
new 
ErrorViewModel *
{+ ,
	RequestId- 6
=7 8
Activity9 A
.A B
CurrentB I
?I J
.J K
IdK M
??N P
HttpContextQ \
.\ ]
TraceIdentifier] l
}m n
)n o
;o p
} 	
} 
}   ´R
¢D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\DoctorController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
DoctorController !
:" #

Controller$ .
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
public 
DoctorController 
(  
AppDbContext  ,
context- 4
)4 5
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
View 
( 
await 
_context &
.& '
Doctors' .
.. /
ToListAsync/ :
(: ;
); <
)< =
;= >
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if 
( 
id 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
} 
var 
doctor 
= 
await 
_context '
.' (
Doctors( /
.   
FirstOrDefaultAsync   $
(  $ %
m  % &
=>  ' )
m  * +
.  + ,
DoctorId  , 4
==  5 7
id  8 :
)  : ;
;  ; <
if!! 
(!! 
doctor!! 
==!! 
null!! 
)!! 
{"" 
return## 
NotFound## 
(##  
)##  !
;##! "
}$$ 
return&& 
View&& 
(&& 
doctor&& 
)&& 
;&&  
}'' 	
public** 
IActionResult** 
Create** #
(**# $
)**$ %
{++ 	
return,, 
View,, 
(,, 
),, 
;,, 
}-- 	
[22 	
HttpPost22	 
]22 
[33 	$
ValidateAntiForgeryToken33	 !
]33! "
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
Create44) /
(44/ 0
[440 1
Bind441 5
(445 6
$str446 g
)44g h
]44h i
Doctor44j p
doctor44q w
)44w x
{55 	
if66 
(66 

ModelState66 
.66 
IsValid66 "
)66" #
{77 
if99 
(99 
doctor99 
.99 
Availability99 &
==99' )
$str99* ,
||99- /
doctor990 6
.996 7
Availability997 C
==99D F
null99G K
)99K L
{:: 
return;; 
RedirectToAction;; +
(;;+ ,
nameof;;, 2
(;;2 3
Create;;3 9
);;9 :
);;: ;
;;;; <
}<< 
_context>> 
.>> 
Add>> 
(>> 
doctor>> #
)>># $
;>>$ %
await?? 
_context?? 
.?? 
SaveChangesAsync?? /
(??/ 0
)??0 1
;??1 2
return@@ 
RedirectToAction@@ '
(@@' (
nameof@@( .
(@@. /
Index@@/ 4
)@@4 5
)@@5 6
;@@6 7
}AA 
returnBB 
ViewBB 
(BB 
doctorBB 
)BB 
;BB  
}CC 	
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (
EditFF) -
(FF- .
intFF. 1
?FF1 2
idFF3 5
)FF5 6
{GG 	
ifHH 
(HH 
idHH 
==HH 
nullHH 
)HH 
{II 
returnJJ 
NotFoundJJ 
(JJ  
)JJ  !
;JJ! "
}KK 
varMM 
doctorMM 
=MM 
awaitMM 
_contextMM '
.MM' (
DoctorsMM( /
.MM/ 0
	FindAsyncMM0 9
(MM9 :
idMM: <
)MM< =
;MM= >
ifNN 
(NN 
doctorNN 
==NN 
nullNN 
)NN 
{OO 
returnPP 
NotFoundPP 
(PP  
)PP  !
;PP! "
}QQ 
returnRR 
ViewRR 
(RR 
doctorRR 
)RR 
;RR  
}SS 	
[XX 	
HttpPostXX	 
]XX 
[YY 	$
ValidateAntiForgeryTokenYY	 !
]YY! "
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
EditZZ) -
(ZZ- .
intZZ. 1
idZZ2 4
,ZZ4 5
[ZZ6 7
BindZZ7 ;
(ZZ; <
$strZZ< m
)ZZm n
]ZZn o
DoctorZZp v
doctorZZw }
)ZZ} ~
{[[ 	
if\\ 
(\\ 
id\\ 
!=\\ 
doctor\\ 
.\\ 
DoctorId\\ %
)\\% &
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
ifaa 
(aa 

ModelStateaa 
.aa 
IsValidaa "
)aa" #
{bb 
trycc 
{dd 
ifff 
(ff 
doctorff 
.ff 
Availabilityff +
==ff, .
$strff/ 1
||ff2 4
doctorff5 ;
.ff; <
Availabilityff< H
==ffI K
nullffL P
)ffP Q
{gg 
returnhh 
RedirectToActionhh /
(hh/ 0
nameofhh0 6
(hh6 7
Edithh7 ;
)hh; <
)hh< =
;hh= >
}ii 
_contextkk 
.kk 
Updatekk #
(kk# $
doctorkk$ *
)kk* +
;kk+ ,
awaitll 
_contextll "
.ll" #
SaveChangesAsyncll# 3
(ll3 4
)ll4 5
;ll5 6
}mm 
catchnn 
(nn (
DbUpdateConcurrencyExceptionnn 3
)nn3 4
{oo 
ifpp 
(pp 
!pp 
DoctorExistspp %
(pp% &
doctorpp& ,
.pp, -
DoctorIdpp- 5
)pp5 6
)pp6 7
{qq 
returnrr 
NotFoundrr '
(rr' (
)rr( )
;rr) *
}ss 
elsett 
{uu 
throwvv 
;vv 
}ww 
}xx 
returnyy 
RedirectToActionyy '
(yy' (
nameofyy( .
(yy. /
Indexyy/ 4
)yy4 5
)yy5 6
;yy6 7
}zz 
return{{ 
View{{ 
({{ 
doctor{{ 
){{ 
;{{  
}|| 	
public 
async 
Task 
< 
IActionResult '
>' (
Delete) /
(/ 0
int0 3
?3 4
id5 7
)7 8
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
id
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
var
ÜÜ 
doctor
ÜÜ 
=
ÜÜ 
await
ÜÜ 
_context
ÜÜ '
.
ÜÜ' (
Doctors
ÜÜ( /
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,
DoctorId
áá, 4
==
áá5 7
id
áá8 :
)
áá: ;
;
áá; <
if
àà 
(
àà 
doctor
àà 
==
àà 
null
àà 
)
àà 
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 
doctor
çç 
)
çç 
;
çç  
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
int
ìì9 <
id
ìì= ?
)
ìì? @
{
îî 	
var
ïï 
doctor
ïï 
=
ïï 
await
ïï 
_context
ïï '
.
ïï' (
Doctors
ïï( /
.
ïï/ 0
	FindAsync
ïï0 9
(
ïï9 :
id
ïï: <
)
ïï< =
;
ïï= >
if
ññ 
(
ññ 
doctor
ññ 
!=
ññ 
null
ññ 
)
ññ 
{
óó 
_context
òò 
.
òò 
Doctors
òò  
.
òò  !
Remove
òò! '
(
òò' (
doctor
òò( .
)
òò. /
;
òò/ 0
}
ôô 
await
õõ 
_context
õõ 
.
õõ 
SaveChangesAsync
õõ +
(
õõ+ ,
)
õõ, -
;
õõ- .
return
úú 
RedirectToAction
úú #
(
úú# $
nameof
úú$ *
(
úú* +
Index
úú+ 0
)
úú0 1
)
úú1 2
;
úú2 3
}
ùù 	
private
üü 
bool
üü 
DoctorExists
üü !
(
üü! "
int
üü" %
id
üü& (
)
üü( )
{
†† 	
return
°° 
_context
°° 
.
°° 
Doctors
°° #
.
°°# $
Any
°°$ '
(
°°' (
e
°°( )
=>
°°* ,
e
°°- .
.
°°. /
DoctorId
°°/ 7
==
°°8 :
id
°°; =
)
°°= >
;
°°> ?
}
¢¢ 	
}
££ 
}§§ Ò|
ßD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\AppointmentController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public		 

class		 !
AppointmentController		 &
:		' (

Controller		) 3
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public !
AppointmentController $
($ %
AppDbContext% 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
AppDbContext 
= 
_context '
.' (
Appointments( 4
.4 5
Include5 <
(< =
a= >
=>? A
aB C
.C D
DoctorD J
)J K
.K L
IncludeL S
(S T
aT U
=>V X
aY Z
.Z [
Patient[ b
)b c
;c d
return 
View 
( 
await 
AppDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if 
( 
id 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
} 
var!! 
appointment!! 
=!! 
await!! #
_context!!$ ,
.!!, -
Appointments!!- 9
."" 
Include"" 
("" 
a"" 
=>"" 
a"" 
.""  
Doctor""  &
)""& '
.## 
Include## 
(## 
a## 
=>## 
a## 
.##  
Patient##  '
)##' (
.$$ 
FirstOrDefaultAsync$$ $
($$$ %
m$$% &
=>$$' )
m$$* +
.$$+ ,
AppointmentId$$, 9
==$$: <
id$$= ?
)$$? @
;$$@ A
if%% 
(%% 
appointment%% 
==%% 
null%% #
)%%# $
{&& 
return'' 
NotFound'' 
(''  
)''  !
;''! "
}(( 
return** 
View** 
(** 
appointment** #
)**# $
;**$ %
}++ 	
public.. 
IActionResult.. 
Create.. #
(..# $
)..$ %
{// 	
ViewData00 
[00 
$str00 
]00  
=00! "
new00# &

SelectList00' 1
(001 2
_context002 :
.00: ;
Doctors00; B
,00B C
$str00D N
,00N O
$str00P Z
)00Z [
;00[ \
ViewData11 
[11 
$str11  
]11  !
=11" #
new11$ '

SelectList11( 2
(112 3
_context113 ;
.11; <
Patients11< D
,11D E
$str11F Q
,11Q R
$str11S ^
)11^ _
;11_ `
ViewData22 
[22 
$str22 !
]22! "
=22# $
new22% (

SelectList22) 3
(223 4
_context224 <
.22< =
Doctors22= D
,22D E
$str22F P
,22P Q
$str22R ^
)22^ _
;22_ `
ViewData33 
[33 
$str33 "
]33" #
=33$ %
new33& )

SelectList33* 4
(334 5
_context335 =
.33= >
Patients33> F
,33F G
$str33H S
,33S T
$str33U b
)33b c
;33c d
return44 
View44 
(44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
Create<<) /
(<</ 0
[<<0 1
Bind<<1 5
(<<5 6
$str	<<6 Ñ
)
<<Ñ Ö
]
<<Ö Ü
Appointment
<<á í
appointment
<<ì û
)
<<û ü
{== 	
if>> 
(>> 

ModelState>> 
.>> 
IsValid>> "
)>>" #
{?? 
ifAA 
(AA 
appointmentAA 
.AA 
StatusofAppointAA .
==AA/ 1
$strAA2 4
||AA5 7
appointmentAA8 C
.AAC D
StatusofAppointAAD S
==AAT V
nullAAW [
)AA[ \
{BB 
returnCC 
RedirectToActionCC +
(CC+ ,
nameofCC, 2
(CC2 3
CreateCC3 9
)CC9 :
)CC: ;
;CC; <
}DD 
_contextFF 
.FF 
AddFF 
(FF 
appointmentFF (
)FF( )
;FF) *
awaitGG 
_contextGG 
.GG 
SaveChangesAsyncGG /
(GG/ 0
)GG0 1
;GG1 2
returnHH 
RedirectToActionHH '
(HH' (
nameofHH( .
(HH. /
IndexHH/ 4
)HH4 5
)HH5 6
;HH6 7
}II 
ViewDataJJ 
[JJ 
$strJJ 
]JJ  
=JJ! "
newJJ# &

SelectListJJ' 1
(JJ1 2
_contextJJ2 :
.JJ: ;
DoctorsJJ; B
,JJB C
$strJJD N
,JJN O
$strJJP Z
,JJZ [
appointmentJJ\ g
.JJg h
DoctorIdJJh p
)JJp q
;JJq r
ViewDataKK 
[KK 
$strKK  
]KK  !
=KK" #
newKK$ '

SelectListKK( 2
(KK2 3
_contextKK3 ;
.KK; <
PatientsKK< D
,KKD E
$strKKF Q
,KKQ R
$strKKS ^
,KK^ _
appointmentKK` k
.KKk l
	PatientIdKKl u
)KKu v
;KKv w
returnLL 
ViewLL 
(LL 
appointmentLL #
)LL# $
;LL$ %
}MM 	
publicPP 
asyncPP 
TaskPP 
<PP 
IActionResultPP '
>PP' (
EditPP) -
(PP- .
intPP. 1
?PP1 2
idPP3 5
)PP5 6
{QQ 	
ifRR 
(RR 
idRR 
==RR 
nullRR 
)RR 
{SS 
returnTT 
NotFoundTT 
(TT  
)TT  !
;TT! "
}UU 
varWW 
appointmentWW 
=WW 
awaitWW #
_contextWW$ ,
.WW, -
AppointmentsWW- 9
.WW9 :
	FindAsyncWW: C
(WWC D
idWWD F
)WWF G
;WWG H
ifXX 
(XX 
appointmentXX 
==XX 
nullXX #
)XX# $
{YY 
returnZZ 
NotFoundZZ 
(ZZ  
)ZZ  !
;ZZ! "
}[[ 
ViewData\\ 
[\\ 
$str\\ !
]\\! "
=\\# $
new\\% (

SelectList\\) 3
(\\3 4
_context\\4 <
.\\< =
Doctors\\= D
,\\D E
$str\\F P
,\\P Q
$str\\R ^
)\\^ _
;\\_ `
ViewData]] 
[]] 
$str]] "
]]]" #
=]]$ %
new]]& )

SelectList]]* 4
(]]4 5
_context]]5 =
.]]= >
Patients]]> F
,]]F G
$str]]H S
,]]S T
$str]]U b
)]]b c
;]]c d
ViewData^^ 
[^^ 
$str^^ 
]^^  
=^^! "
new^^# &

SelectList^^' 1
(^^1 2
_context^^2 :
.^^: ;
Doctors^^; B
,^^B C
$str^^D N
,^^N O
$str^^P Z
,^^Z [
appointment^^\ g
.^^g h
DoctorId^^h p
)^^p q
;^^q r
ViewData__ 
[__ 
$str__  
]__  !
=__" #
new__$ '

SelectList__( 2
(__2 3
_context__3 ;
.__; <
Patients__< D
,__D E
$str__F Q
,__Q R
$str__S ^
,__^ _
appointment__` k
.__k l
	PatientId__l u
)__u v
;__v w
return`` 
View`` 
(`` 
appointment`` #
)``# $
;``$ %
}aa 	
[ff 	
HttpPostff	 
]ff 
[gg 	$
ValidateAntiForgeryTokengg	 !
]gg! "
publichh 
asynchh 
Taskhh 
<hh 
IActionResulthh '
>hh' (
Edithh) -
(hh- .
inthh. 1
idhh2 4
,hh4 5
[hh6 7
Bindhh7 ;
(hh; <
$str	hh< ä
)
hhä ã
]
hhã å
Appointment
hhç ò
appointment
hhô §
)
hh§ •
{ii 	
ifjj 
(jj 
idjj 
!=jj 
appointmentjj !
.jj! "
AppointmentIdjj" /
)jj/ 0
{kk 
returnll 
NotFoundll 
(ll  
)ll  !
;ll! "
}mm 
ifoo 
(oo 

ModelStateoo 
.oo 
IsValidoo "
)oo" #
{pp 
tryqq 
{rr 
iftt 
(tt 
appointmenttt #
.tt# $
StatusofAppointtt$ 3
==tt4 6
$strtt7 9
||tt: <
appointmenttt= H
.ttH I
StatusofAppointttI X
==ttY [
nulltt\ `
)tt` a
{uu 
returnvv 
RedirectToActionvv /
(vv/ 0
nameofvv0 6
(vv6 7
Editvv7 ;
)vv; <
)vv< =
;vv= >
}ww 
_contextyy 
.yy 
Updateyy #
(yy# $
appointmentyy$ /
)yy/ 0
;yy0 1
awaitzz 
_contextzz "
.zz" #
SaveChangesAsynczz# 3
(zz3 4
)zz4 5
;zz5 6
}{{ 
catch|| 
(|| (
DbUpdateConcurrencyException|| 3
)||3 4
{}} 
if~~ 
(~~ 
!~~ 
AppointmentExists~~ *
(~~* +
appointment~~+ 6
.~~6 7
AppointmentId~~7 D
)~~D E
)~~E F
{ 
return
ÄÄ 
NotFound
ÄÄ '
(
ÄÄ' (
)
ÄÄ( )
;
ÄÄ) *
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
throw
ÑÑ 
;
ÑÑ 
}
ÖÖ 
}
ÜÜ 
return
áá 
RedirectToAction
áá '
(
áá' (
nameof
áá( .
(
áá. /
Index
áá/ 4
)
áá4 5
)
áá5 6
;
áá6 7
}
àà 
ViewData
ââ 
[
ââ 
$str
ââ 
]
ââ  
=
ââ! "
new
ââ# &

SelectList
ââ' 1
(
ââ1 2
_context
ââ2 :
.
ââ: ;
Doctors
ââ; B
,
ââB C
$str
ââD N
,
ââN O
$str
ââP Z
,
ââZ [
appointment
ââ\ g
.
ââg h
DoctorId
ââh p
)
ââp q
;
ââq r
ViewData
ää 
[
ää 
$str
ää  
]
ää  !
=
ää" #
new
ää$ '

SelectList
ää( 2
(
ää2 3
_context
ää3 ;
.
ää; <
Patients
ää< D
,
ääD E
$str
ääF Q
,
ääQ R
$str
ääS ^
,
ää^ _
appointment
ää` k
.
ääk l
	PatientId
ääl u
)
ääu v
;
ääv w
return
ãã 
View
ãã 
(
ãã 
appointment
ãã #
)
ãã# $
;
ãã$ %
}
åå 	
public
èè 
async
èè 
Task
èè 
<
èè 
IActionResult
èè '
>
èè' (
Delete
èè) /
(
èè/ 0
int
èè0 3
?
èè3 4
id
èè5 7
)
èè7 8
{
êê 	
if
ëë 
(
ëë 
id
ëë 
==
ëë 
null
ëë 
)
ëë 
{
íí 
return
ìì 
NotFound
ìì 
(
ìì  
)
ìì  !
;
ìì! "
}
îî 
var
ññ 
appointment
ññ 
=
ññ 
await
ññ #
_context
ññ$ ,
.
ññ, -
Appointments
ññ- 9
.
óó 
Include
óó 
(
óó 
a
óó 
=>
óó 
a
óó 
.
óó  
Doctor
óó  &
)
óó& '
.
òò 
Include
òò 
(
òò 
a
òò 
=>
òò 
a
òò 
.
òò  
Patient
òò  '
)
òò' (
.
ôô !
FirstOrDefaultAsync
ôô $
(
ôô$ %
m
ôô% &
=>
ôô' )
m
ôô* +
.
ôô+ ,
AppointmentId
ôô, 9
==
ôô: <
id
ôô= ?
)
ôô? @
;
ôô@ A
if
öö 
(
öö 
appointment
öö 
==
öö 
null
öö #
)
öö# $
{
õõ 
return
úú 
NotFound
úú 
(
úú  
)
úú  !
;
úú! "
}
ùù 
return
üü 
View
üü 
(
üü 
appointment
üü #
)
üü# $
;
üü$ %
}
†† 	
[
££ 	
HttpPost
££	 
,
££ 

ActionName
££ 
(
££ 
$str
££ &
)
££& '
]
££' (
[
§§ 	&
ValidateAntiForgeryToken
§§	 !
]
§§! "
public
•• 
async
•• 
Task
•• 
<
•• 
IActionResult
•• '
>
••' (
DeleteConfirmed
••) 8
(
••8 9
int
••9 <
id
••= ?
)
••? @
{
¶¶ 	
var
ßß 
appointment
ßß 
=
ßß 
await
ßß #
_context
ßß$ ,
.
ßß, -
Appointments
ßß- 9
.
ßß9 :
	FindAsync
ßß: C
(
ßßC D
id
ßßD F
)
ßßF G
;
ßßG H
if
®® 
(
®® 
appointment
®® 
!=
®® 
null
®® #
)
®®# $
{
©© 
_context
™™ 
.
™™ 
Appointments
™™ %
.
™™% &
Remove
™™& ,
(
™™, -
appointment
™™- 8
)
™™8 9
;
™™9 :
}
´´ 
await
≠≠ 
_context
≠≠ 
.
≠≠ 
SaveChangesAsync
≠≠ +
(
≠≠+ ,
)
≠≠, -
;
≠≠- .
return
ÆÆ 
RedirectToAction
ÆÆ #
(
ÆÆ# $
nameof
ÆÆ$ *
(
ÆÆ* +
Index
ÆÆ+ 0
)
ÆÆ0 1
)
ÆÆ1 2
;
ÆÆ2 3
}
ØØ 	
private
±± 
bool
±± 
AppointmentExists
±± &
(
±±& '
int
±±' *
id
±±+ -
)
±±- .
{
≤≤ 	
return
≥≥ 
_context
≥≥ 
.
≥≥ 
Appointments
≥≥ (
.
≥≥( )
Any
≥≥) ,
(
≥≥, -
e
≥≥- .
=>
≥≥/ 1
e
≥≥2 3
.
≥≥3 4
AppointmentId
≥≥4 A
==
≥≥B D
id
≥≥E G
)
≥≥G H
;
≥≥H I
}
¥¥ 	
}
µµ 
}∂∂ 