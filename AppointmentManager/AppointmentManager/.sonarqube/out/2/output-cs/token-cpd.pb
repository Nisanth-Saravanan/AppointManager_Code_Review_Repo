ù
çD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddDbContext		 
<		 
appdbcontext		 *
>		* +
(		+ ,
options		, 3
=>		4 6
options		7 >
.		> ?
UseMySql		? G
(		G H
builder		H O
.		O P
Configuration		P ]
.		] ^
GetConnectionString		^ q
(		q r
$str			r Ö
)
		Ö Ü
,
		Ü á
ServerVersion

 
.

 

AutoDetect

 
(

 
(

 
builder

 %
.

% &
Configuration

& 3
.

3 4
GetConnectionString

4 G
(

G H
$str

H [
)

[ \
)

\ ]
)

] ^
)

^ _
)

_ `
;

` a
builder 
. 
Services 
. #
AddControllersWithViews (
(( )
)) *
;* +
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
! 
app 
. 	
Environment	 
. 
IsDevelopment "
(" #
)# $
)$ %
{ 
app 
. 
UseExceptionHandler 
( 
$str )
)) *
;* +
app 
. 
UseHsts 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseStaticFiles 
( 
) 
; 
app 
. 

UseRouting 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app   
.   
MapControllerRoute   
(   
name!! 
:!! 	
$str!!
 
,!! 
pattern"" 
:"" 
$str"" 5
)""5 6
;""6 7
app$$ 
.$$ 
Run$$ 
($$ 
)$$ 	
;$$	 
◊
îD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Patient.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
patient 
{ 
public 

int 
	PatientId 
{ 
get 
; 
set  #
;# $
}% &
public

 

string

 
PatientName

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 

string 
PatientEmail 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

int 
PatientPhone 
{ 
get !
;! "
set# &
;& '
}( )
public 

DateOnly 

PatientDob 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
PatientGender 
{  !
get" %
;% &
set' *
;* +
}, -
public 

virtual 
appointment 
Appointment *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} ˇ
õD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\ErrorViewModel.cs
	namespace 	
AppointmentManager
 
. 
Models #
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
} 
}		 â
òD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Appointment.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
appointment  
{ 
public 

int 
AppointmentId 
{ 
get "
;" #
set$ '
;' (
}) *
public

 

int

 
	PatientId

 
{

 
get

 
;

 
set

  #
;

# $
}

% &
public 

int 
DoctorId 
{ 
get 
; 
set "
;" #
}$ %
public 

DateOnly 
DateofAppoint !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

TimeOnly 
TimeofAppoint !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

string 
StatusofAppoint !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

virtual 
doctor 
Doctor  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

virtual 
patient 
Patient "
{# $
get% (
;( )
set* -
;- .
}/ 0
} ó	
ìD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Models\Doctor.cs
	namespace 	
AppointmentManager
 
. 
Models #
;# $
public 
partial 
class 
doctor 
{ 
public 

int 
DoctorId 
{ 
get 
; 
set "
;" #
}$ %
public

 

string

 

DoctorName

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 

string 
Specialization  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

string 
Availability 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

virtual 
appointment 
Appointment *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} èE
óD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Data\AppDbContext.cs
	namespace 	
AppointmentManager
 
. 
Data !
;! "
public		 
partial		 
class		 
appdbcontext		 !
:		" #
	DbContext		$ -
{

 
public 

appdbcontext 
( 
) 
{ 
} 
public 

appdbcontext 
( 
DbContextOptions (
<( )
appdbcontext) 5
>5 6
options7 >
)> ?
: 	
base
 
( 
options 
) 
{ 
} 
public 

virtual 
DbSet 
< 
appointment $
>$ %
Appointments& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 

virtual 
DbSet 
< 
doctor 
>  
Doctors! (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 

virtual 
DbSet 
< 
patient  
>  !
Patients" *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
	protected 
override 
void 
OnConfiguring )
() *#
DbContextOptionsBuilder* A
optionsBuilderB P
)P Q
=> 

optionsBuilder 
. 
UseMySql "
(" #
$str# k
,k l
ServerVersionm z
.z {
Parse	{ Ä
(
Ä Å
$str
Å è
)
è ê
)
ê ë
;
ë í
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{   
modelBuilder!! 
."" 
UseCollation"" 
("" 
$str"" .
)"". /
.## 

HasCharSet## 
(## 
$str## !
)##! "
;##" #
modelBuilder%% 
.%% 
Entity%% 
<%% 
appointment%% '
>%%' (
(%%( )
entity%%) /
=>%%0 2
{&& 	
entity'' 
.'' 
HasKey'' 
('' 
e'' 
=>'' 
e''  
.''  !
AppointmentId''! .
)''. /
.''/ 0
HasName''0 7
(''7 8
$str''8 A
)''A B
;''B C
entity)) 
.)) 
ToTable)) 
()) 
$str)) )
)))) *
;))* +
entity++ 
.++ 
HasIndex++ 
(++ 
e++ 
=>++  
e++! "
.++" #
DoctorId++# +
,+++ ,
$str++- 7
)++7 8
.++8 9
IsUnique++9 A
(++A B
)++B C
;++C D
entity-- 
.-- 
HasIndex-- 
(-- 
e-- 
=>--  
e--! "
.--" #
	PatientId--# ,
,--, -
$str--. 9
)--9 :
.--: ;
IsUnique--; C
(--C D
)--D E
;--E F
entity// 
.// 
Property// 
(// 
e// 
=>//  
e//! "
.//" #
StatusofAppoint//# 2
)//2 3
.//3 4
HasMaxLength//4 @
(//@ A
$num//A C
)//C D
;//D E
entity00 
.00 
Property00 
(00 
e00 
=>00  
e00! "
.00" #
TimeofAppoint00# 0
)000 1
.001 2
HasColumnType002 ?
(00? @
$str00@ F
)00F G
;00G H
entity22 
.22 
HasOne22 
(22 
d22 
=>22 
d22  
.22  !
Doctor22! '
)22' (
.22( )
WithOne22) 0
(220 1
p221 2
=>223 5
p226 7
.227 8
Appointment228 C
)22C D
.33 
HasForeignKey33 
<33 
appointment33 *
>33* +
(33+ ,
d33, -
=>33. 0
d331 2
.332 3
DoctorId333 ;
)33; <
.44 
HasConstraintName44 "
(44" #
$str44# 8
)448 9
;449 :
entity66 
.66 
HasOne66 
(66 
d66 
=>66 
d66  
.66  !
Patient66! (
)66( )
.66) *
WithOne66* 1
(661 2
p662 3
=>664 6
p667 8
.668 9
Appointment669 D
)66D E
.77 
HasForeignKey77 
<77 
appointment77 *
>77* +
(77+ ,
d77, -
=>77. 0
d771 2
.772 3
	PatientId773 <
)77< =
.88 
HasConstraintName88 "
(88" #
$str88# 8
)888 9
;889 :
}99 	
)99	 

;99
 
modelBuilder;; 
.;; 
Entity;; 
<;; 
doctor;; "
>;;" #
(;;# $
entity;;$ *
=>;;+ -
{<< 	
entity== 
.== 
HasKey== 
(== 
e== 
=>== 
e==  
.==  !
DoctorId==! )
)==) *
.==* +
HasName==+ 2
(==2 3
$str==3 <
)==< =
;=== >
entity?? 
.?? 
ToTable?? 
(?? 
$str?? $
)??$ %
;??% &
entityAA 
.AA 
PropertyAA 
(AA 
eAA 
=>AA  
eAA! "
.AA" #
AvailabilityAA# /
)AA/ 0
.AA0 1
HasMaxLengthAA1 =
(AA= >
$numAA> @
)AA@ A
;AAA B
entityBB 
.BB 
PropertyBB 
(BB 
eBB 
=>BB  
eBB! "
.BB" #

DoctorNameBB# -
)BB- .
.BB. /
HasMaxLengthBB/ ;
(BB; <
$numBB< >
)BB> ?
;BB? @
entityCC 
.CC 
PropertyCC 
(CC 
eCC 
=>CC  
eCC! "
.CC" #
SpecializationCC# 1
)CC1 2
.CC2 3
HasMaxLengthCC3 ?
(CC? @
$numCC@ C
)CCC D
;CCD E
}DD 	
)DD	 

;DD
 
modelBuilderFF 
.FF 
EntityFF 
<FF 
patientFF #
>FF# $
(FF$ %
entityFF% +
=>FF, .
{GG 	
entityHH 
.HH 
HasKeyHH 
(HH 
eHH 
=>HH 
eHH  
.HH  !
	PatientIdHH! *
)HH* +
.HH+ ,
HasNameHH, 3
(HH3 4
$strHH4 =
)HH= >
;HH> ?
entityJJ 
.JJ 
ToTableJJ 
(JJ 
$strJJ %
)JJ% &
;JJ& '
entityLL 
.LL 
PropertyLL 
(LL 
eLL 
=>LL  
eLL! "
.LL" #
PatientPhoneLL# /
)LL/ 0
.LL0 1
HasMaxLengthLL1 =
(LL= >
$numLL> @
)LL@ A
;LLA B
entityMM 
.MM 
PropertyMM 
(MM 
eMM 
=>MM  
eMM! "
.MM" #
PatientEmailMM# /
)MM/ 0
.MM0 1
HasMaxLengthMM1 =
(MM= >
$numMM> @
)MM@ A
;MMA B
entityNN 
.NN 
PropertyNN 
(NN 
eNN 
=>NN  
eNN! "
.NN" #
PatientGenderNN# 0
)NN0 1
.NN1 2
HasMaxLengthNN2 >
(NN> ?
$numNN? A
)NNA B
;NNB C
entityOO 
.OO 
PropertyOO 
(OO 
eOO 
=>OO  
eOO! "
.OO" #
PatientNameOO# .
)OO. /
.OO/ 0
HasMaxLengthOO0 <
(OO< =
$numOO= ?
)OO? @
;OO@ A
}PP 	
)PP	 

;PP
 "
OnModelCreatingPartialRR 
(RR 
modelBuilderRR +
)RR+ ,
;RR, -
}SS 
partialUU 
voidUU "
OnModelCreatingPartialUU '
(UU' (
ModelBuilderUU( 4
modelBuilderUU5 A
)UUA B
;UUB C
}VV äS
£D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\PatientController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
PatientController "
:# $

Controller% /
{ 
private 
readonly 
appdbcontext %
_context& .
;. /
public 
PatientController  
(  !
appdbcontext! -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
View 
( 
await 
_context &
.& '
Patients' /
./ 0
ToListAsync0 ;
(; <
)< =
)= >
;> ?
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if 
( 
id 
== 
null 
) 
{   
return!! 
NotFound!! 
(!!  
)!!  !
;!!! "
}"" 
var$$ 
patient$$ 
=$$ 
await$$ 
_context$$  (
.$$( )
Patients$$) 1
.%% 
FirstOrDefaultAsync%% $
(%%$ %
m%%% &
=>%%' )
m%%* +
.%%+ ,
	PatientId%%, 5
==%%6 8
id%%9 ;
)%%; <
;%%< =
if&& 
(&& 
patient&& 
==&& 
null&& 
)&&  
{'' 
return(( 
NotFound(( 
(((  
)((  !
;((! "
})) 
return++ 
View++ 
(++ 
patient++ 
)++  
;++  !
},, 	
public// 
IActionResult// 
Create// #
(//# $
)//$ %
{00 	
return11 
View11 
(11 
)11 
;11 
}22 	
[77 	
HttpPost77	 
]77 
[88 	$
ValidateAntiForgeryToken88	 !
]88! "
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
Create99) /
(99/ 0
[990 1
Bind991 5
(995 6
$str	996 Ä
)
99Ä Å
]
99Å Ç
patient
99É ä
patient
99ã í
)
99í ì
{:: 	
if;; 
(;; 

ModelState;; 
.;; 
IsValid;; "
);;" #
{<< 
if>> 
(>> 
patient>> 
.>> 
PatientGender>> )
==>>* ,
$str>>- /
||>>0 2
patient>>3 :
.>>: ;
PatientGender>>; H
==>>I K
null>>L P
)>>P Q
{>>R S
return?? 
RedirectToAction?? +
(??+ ,
nameof??, 2
(??2 3
Create??3 9
)??9 :
)??: ;
;??; <
}@@ 
_contextBB 
.BB 
AddBB 
(BB 
patientBB $
)BB$ %
;BB% &
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC /
(CC/ 0
)CC0 1
;CC1 2
returnDD 
RedirectToActionDD '
(DD' (
nameofDD( .
(DD. /
IndexDD/ 4
)DD4 5
)DD5 6
;DD6 7
}EE 
returnFF 
ViewFF 
(FF 
patientFF 
)FF  
;FF  !
}GG 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
EditJJ) -
(JJ- .
intJJ. 1
?JJ1 2
idJJ3 5
)JJ5 6
{KK 	
ifLL 
(LL 
idLL 
==LL 
nullLL 
)LL 
{MM 
returnNN 
NotFoundNN 
(NN  
)NN  !
;NN! "
}OO 
varQQ 
patientQQ 
=QQ 
awaitQQ 
_contextQQ  (
.QQ( )
PatientsQQ) 1
.QQ1 2
	FindAsyncQQ2 ;
(QQ; <
idQQ< >
)QQ> ?
;QQ? @
ifRR 
(RR 
patientRR 
==RR 
nullRR 
)RR  
{SS 
returnTT 
NotFoundTT 
(TT  
)TT  !
;TT! "
}UU 
returnVV 
ViewVV 
(VV 
patientVV 
)VV  
;VV  !
}WW 	
[\\ 	
HttpPost\\	 
]\\ 
[]] 	$
ValidateAntiForgeryToken]]	 !
]]]! "
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
Edit^^) -
(^^- .
int^^. 1
id^^2 4
,^^4 5
[^^6 7
Bind^^7 ;
(^^; <
$str	^^< Ü
)
^^Ü á
]
^^á à
patient
^^â ê
patient
^^ë ò
)
^^ò ô
{__ 	
if`` 
(`` 
id`` 
!=`` 
patient`` 
.`` 
	PatientId`` '
)``' (
{aa 
returnbb 
NotFoundbb 
(bb  
)bb  !
;bb! "
}cc 
ifee 
(ee 

ModelStateee 
.ee 
IsValidee "
)ee" #
{ff 
trygg 
{hh 
ifjj 
(jj 
patientjj 
.jj  
PatientGenderjj  -
==jj. 0
$strjj1 3
||jj4 6
patientjj7 >
.jj> ?
PatientGenderjj? L
==jjM O
nulljjP T
)jjT U
{kk 
returnll 
RedirectToActionll /
(ll/ 0
nameofll0 6
(ll6 7
Editll7 ;
)ll; <
)ll< =
;ll= >
}mm 
_contextoo 
.oo 
Updateoo #
(oo# $
patientoo$ +
)oo+ ,
;oo, -
awaitpp 
_contextpp "
.pp" #
SaveChangesAsyncpp# 3
(pp3 4
)pp4 5
;pp5 6
}qq 
catchrr 
(rr (
DbUpdateConcurrencyExceptionrr 3
)rr3 4
{ss 
iftt 
(tt 
!tt 
PatientExiststt &
(tt& '
patienttt' .
.tt. /
	PatientIdtt/ 8
)tt8 9
)tt9 :
{uu 
returnvv 
NotFoundvv '
(vv' (
)vv( )
;vv) *
}ww 
elsexx 
{yy 
throwzz 
;zz 
}{{ 
}|| 
return}} 
RedirectToAction}} '
(}}' (
nameof}}( .
(}}. /
Index}}/ 4
)}}4 5
)}}5 6
;}}6 7
}~~ 
return 
View 
( 
patient 
)  
;  !
}
ÄÄ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
IActionResult
ÉÉ '
>
ÉÉ' (
Delete
ÉÉ) /
(
ÉÉ/ 0
int
ÉÉ0 3
?
ÉÉ3 4
id
ÉÉ5 7
)
ÉÉ7 8
{
ÑÑ 	
if
ÖÖ 
(
ÖÖ 
id
ÖÖ 
==
ÖÖ 
null
ÖÖ 
)
ÖÖ 
{
ÜÜ 
return
áá 
NotFound
áá 
(
áá  
)
áá  !
;
áá! "
}
àà 
var
ää 
patient
ää 
=
ää 
await
ää 
_context
ää  (
.
ää( )
Patients
ää) 1
.
ãã !
FirstOrDefaultAsync
ãã $
(
ãã$ %
m
ãã% &
=>
ãã' )
m
ãã* +
.
ãã+ ,
	PatientId
ãã, 5
==
ãã6 8
id
ãã9 ;
)
ãã; <
;
ãã< =
if
åå 
(
åå 
patient
åå 
==
åå 
null
åå 
)
åå  
{
çç 
return
éé 
NotFound
éé 
(
éé  
)
éé  !
;
éé! "
}
èè 
return
ëë 
View
ëë 
(
ëë 
patient
ëë 
)
ëë  
;
ëë  !
}
íí 	
[
ïï 	
HttpPost
ïï	 
,
ïï 

ActionName
ïï 
(
ïï 
$str
ïï &
)
ïï& '
]
ïï' (
[
ññ 	&
ValidateAntiForgeryToken
ññ	 !
]
ññ! "
public
óó 
async
óó 
Task
óó 
<
óó 
IActionResult
óó '
>
óó' (
DeleteConfirmed
óó) 8
(
óó8 9
int
óó9 <
id
óó= ?
)
óó? @
{
òò 	
var
ôô 
patient
ôô 
=
ôô 
await
ôô 
_context
ôô  (
.
ôô( )
Patients
ôô) 1
.
ôô1 2
	FindAsync
ôô2 ;
(
ôô; <
id
ôô< >
)
ôô> ?
;
ôô? @
if
öö 
(
öö 
patient
öö 
!=
öö 
null
öö 
)
öö  
{
õõ 
_context
úú 
.
úú 
Patients
úú !
.
úú! "
Remove
úú" (
(
úú( )
patient
úú) 0
)
úú0 1
;
úú1 2
}
ùù 
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
nameof
††$ *
(
††* +
Index
††+ 0
)
††0 1
)
††1 2
;
††2 3
}
°° 	
private
££ 
bool
££ 
PatientExists
££ "
(
££" #
int
££# &
id
££' )
)
££) *
{
§§ 	
return
•• 
_context
•• 
.
•• 
Patients
•• $
.
••$ %
Any
••% (
(
••( )
e
••) *
=>
••+ -
e
••. /
.
••/ 0
	PatientId
••0 9
==
••: <
id
••= ?
)
••? @
;
••@ A
}
¶¶ 	
}
ßß 
}®® ƒ
†D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\HomeController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
ILogger		  
<		  !
HomeController		! /
>		/ 0
_logger		1 8
;		8 9
public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
)< =
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Privacy $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public 
IActionResult 
Error "
(" #
)# $
{ 	
return 
View 
( 
new 
ErrorViewModel *
{+ ,
	RequestId- 6
=7 8
Activity9 A
.A B
CurrentB I
?I J
.J K
IdK M
??N P
HttpContextQ \
.\ ]
TraceIdentifier] l
}m n
)n o
;o p
} 	
} 
}   —R
¢D:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\DoctorController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class 
DoctorController !
:" #

Controller$ .
{ 
private 
readonly 
appdbcontext %
_context& .
;. /
public 
DoctorController 
(  
appdbcontext  ,
context- 4
)4 5
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
View 
( 
await 
_context &
.& '
Doctors' .
.. /
ToListAsync/ :
(: ;
); <
)< =
;= >
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if 
( 
id 
== 
null 
) 
{   
return!! 
NotFound!! 
(!!  
)!!  !
;!!! "
}"" 
var$$ 
doctor$$ 
=$$ 
await$$ 
_context$$ '
.$$' (
Doctors$$( /
.%% 
FirstOrDefaultAsync%% $
(%%$ %
m%%% &
=>%%' )
m%%* +
.%%+ ,
DoctorId%%, 4
==%%5 7
id%%8 :
)%%: ;
;%%; <
if&& 
(&& 
doctor&& 
==&& 
null&& 
)&& 
{'' 
return(( 
NotFound(( 
(((  
)((  !
;((! "
})) 
return++ 
View++ 
(++ 
doctor++ 
)++ 
;++  
},, 	
public// 
IActionResult// 
Create// #
(//# $
)//$ %
{00 	
return11 
View11 
(11 
)11 
;11 
}22 	
[77 	
HttpPost77	 
]77 
[88 	$
ValidateAntiForgeryToken88	 !
]88! "
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
Create99) /
(99/ 0
[990 1
Bind991 5
(995 6
$str996 g
)99g h
]99h i
doctor99j p
doctor99q w
)99w x
{:: 	
if;; 
(;; 

ModelState;; 
.;; 
IsValid;; "
);;" #
{<< 
if>> 
(>> 
doctor>> 
.>> 
Availability>> &
==>>' )
$str>>* ,
||>>- /
doctor>>0 6
.>>6 7
Availability>>7 C
==>>D F
null>>G K
)>>K L
{?? 
return@@ 
RedirectToAction@@ +
(@@+ ,
nameof@@, 2
(@@2 3
Create@@3 9
)@@9 :
)@@: ;
;@@; <
}AA 
_contextCC 
.CC 
AddCC 
(CC 
doctorCC #
)CC# $
;CC$ %
awaitDD 
_contextDD 
.DD 
SaveChangesAsyncDD /
(DD/ 0
)DD0 1
;DD1 2
returnEE 
RedirectToActionEE '
(EE' (
nameofEE( .
(EE. /
IndexEE/ 4
)EE4 5
)EE5 6
;EE6 7
}FF 
returnGG 
ViewGG 
(GG 
doctorGG 
)GG 
;GG  
}HH 	
publicKK 
asyncKK 
TaskKK 
<KK 
IActionResultKK '
>KK' (
EditKK) -
(KK- .
intKK. 1
?KK1 2
idKK3 5
)KK5 6
{LL 	
ifMM 
(MM 
idMM 
==MM 
nullMM 
)MM 
{NN 
returnOO 
NotFoundOO 
(OO  
)OO  !
;OO! "
}PP 
varRR 
doctorRR 
=RR 
awaitRR 
_contextRR '
.RR' (
DoctorsRR( /
.RR/ 0
	FindAsyncRR0 9
(RR9 :
idRR: <
)RR< =
;RR= >
ifSS 
(SS 
doctorSS 
==SS 
nullSS 
)SS 
{TT 
returnUU 
NotFoundUU 
(UU  
)UU  !
;UU! "
}VV 
returnWW 
ViewWW 
(WW 
doctorWW 
)WW 
;WW  
}XX 	
[]] 	
HttpPost]]	 
]]] 
[^^ 	$
ValidateAntiForgeryToken^^	 !
]^^! "
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' (
Edit__) -
(__- .
int__. 1
id__2 4
,__4 5
[__6 7
Bind__7 ;
(__; <
$str__< m
)__m n
]__n o
doctor__p v
doctor__w }
)__} ~
{`` 	
ifaa 
(aa 
idaa 
!=aa 
doctoraa 
.aa 
DoctorIdaa %
)aa% &
{bb 
returncc 
NotFoundcc 
(cc  
)cc  !
;cc! "
}dd 
ifff 
(ff 

ModelStateff 
.ff 
IsValidff "
)ff" #
{gg 
tryhh 
{ii 
ifkk 
(kk 
doctorkk 
.kk 
Availabilitykk +
==kk, .
$strkk/ 1
||kk2 4
doctorkk5 ;
.kk; <
Availabilitykk< H
==kkI K
nullkkL P
)kkP Q
{ll 
returnmm 
RedirectToActionmm /
(mm/ 0
nameofmm0 6
(mm6 7
Editmm7 ;
)mm; <
)mm< =
;mm= >
}nn 
_contextpp 
.pp 
Updatepp #
(pp# $
doctorpp$ *
)pp* +
;pp+ ,
awaitqq 
_contextqq "
.qq" #
SaveChangesAsyncqq# 3
(qq3 4
)qq4 5
;qq5 6
}rr 
catchss 
(ss (
DbUpdateConcurrencyExceptionss 3
)ss3 4
{tt 
ifuu 
(uu 
!uu 
DoctorExistsuu %
(uu% &
doctoruu& ,
.uu, -
DoctorIduu- 5
)uu5 6
)uu6 7
{vv 
returnww 
NotFoundww '
(ww' (
)ww( )
;ww) *
}xx 
elseyy 
{zz 
throw{{ 
;{{ 
}|| 
}}} 
return~~ 
RedirectToAction~~ '
(~~' (
nameof~~( .
(~~. /
Index~~/ 4
)~~4 5
)~~5 6
;~~6 7
} 
return
ÄÄ 
View
ÄÄ 
(
ÄÄ 
doctor
ÄÄ 
)
ÄÄ 
;
ÄÄ  
}
ÅÅ 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
IActionResult
ÑÑ '
>
ÑÑ' (
Delete
ÑÑ) /
(
ÑÑ/ 0
int
ÑÑ0 3
?
ÑÑ3 4
id
ÑÑ5 7
)
ÑÑ7 8
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
id
ÜÜ 
==
ÜÜ 
null
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
NotFound
àà 
(
àà  
)
àà  !
;
àà! "
}
ââ 
var
ãã 
doctor
ãã 
=
ãã 
await
ãã 
_context
ãã '
.
ãã' (
Doctors
ãã( /
.
åå !
FirstOrDefaultAsync
åå $
(
åå$ %
m
åå% &
=>
åå' )
m
åå* +
.
åå+ ,
DoctorId
åå, 4
==
åå5 7
id
åå8 :
)
åå: ;
;
åå; <
if
çç 
(
çç 
doctor
çç 
==
çç 
null
çç 
)
çç 
{
éé 
return
èè 
NotFound
èè 
(
èè  
)
èè  !
;
èè! "
}
êê 
return
íí 
View
íí 
(
íí 
doctor
íí 
)
íí 
;
íí  
}
ìì 	
[
ññ 	
HttpPost
ññ	 
,
ññ 

ActionName
ññ 
(
ññ 
$str
ññ &
)
ññ& '
]
ññ' (
[
óó 	&
ValidateAntiForgeryToken
óó	 !
]
óó! "
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' (
DeleteConfirmed
òò) 8
(
òò8 9
int
òò9 <
id
òò= ?
)
òò? @
{
ôô 	
var
öö 
doctor
öö 
=
öö 
await
öö 
_context
öö '
.
öö' (
Doctors
öö( /
.
öö/ 0
	FindAsync
öö0 9
(
öö9 :
id
öö: <
)
öö< =
;
öö= >
if
õõ 
(
õõ 
doctor
õõ 
!=
õõ 
null
õõ 
)
õõ 
{
úú 
_context
ùù 
.
ùù 
Doctors
ùù  
.
ùù  !
Remove
ùù! '
(
ùù' (
doctor
ùù( .
)
ùù. /
;
ùù/ 0
}
ûû 
await
†† 
_context
†† 
.
†† 
SaveChangesAsync
†† +
(
††+ ,
)
††, -
;
††- .
return
°° 
RedirectToAction
°° #
(
°°# $
nameof
°°$ *
(
°°* +
Index
°°+ 0
)
°°0 1
)
°°1 2
;
°°2 3
}
¢¢ 	
private
§§ 
bool
§§ 
DoctorExists
§§ !
(
§§! "
int
§§" %
id
§§& (
)
§§( )
{
•• 	
return
¶¶ 
_context
¶¶ 
.
¶¶ 
Doctors
¶¶ #
.
¶¶# $
Any
¶¶$ '
(
¶¶' (
e
¶¶( )
=>
¶¶* ,
e
¶¶- .
.
¶¶. /
DoctorId
¶¶/ 7
==
¶¶8 :
id
¶¶; =
)
¶¶= >
;
¶¶> ?
}
ßß 	
}
®® 
}©© ë}
ßD:\Intern Files\Intern Assessment\L1 Assessment\Code Quality\AppointManager_Code_Review_Repo\AppointmentManager\AppointmentManager\Controllers\AppointmentController.cs
	namespace 	
AppointmentManager
 
. 
Controllers (
{ 
public 

class !
AppointmentController &
:' (

Controller) 3
{ 
private 
readonly 
appdbcontext %
_context& .
;. /
public !
AppointmentController $
($ %
appdbcontext% 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appdbcontext 
= 
_context '
.' (
Appointments( 4
.4 5
Include5 <
(< =
a= >
=>? A
aB C
.C D
DoctorD J
)J K
.K L
IncludeL S
(S T
aT U
=>V X
aY Z
.Z [
Patient[ b
)b c
;c d
return 
View 
( 
await 
appdbcontext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
)   
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
appointment%% 
=%% 
await%% #
_context%%$ ,
.%%, -
Appointments%%- 9
.&& 
Include&& 
(&& 
a&& 
=>&& 
a&& 
.&&  
Doctor&&  &
)&&& '
.'' 
Include'' 
('' 
a'' 
=>'' 
a'' 
.''  
Patient''  '
)''' (
.(( 
FirstOrDefaultAsync(( $
((($ %
m((% &
=>((' )
m((* +
.((+ ,
AppointmentId((, 9
==((: <
id((= ?
)((? @
;((@ A
if)) 
()) 
appointment)) 
==)) 
null)) #
)))# $
{** 
return++ 
NotFound++ 
(++  
)++  !
;++! "
},, 
return.. 
View.. 
(.. 
appointment.. #
)..# $
;..$ %
}// 	
public22 
IActionResult22 
Create22 #
(22# $
)22$ %
{33 	
ViewData44 
[44 
$str44 
]44  
=44! "
new44# &

SelectList44' 1
(441 2
_context442 :
.44: ;
Doctors44; B
,44B C
$str44D N
,44N O
$str44P Z
)44Z [
;44[ \
ViewData55 
[55 
$str55  
]55  !
=55" #
new55$ '

SelectList55( 2
(552 3
_context553 ;
.55; <
Patients55< D
,55D E
$str55F Q
,55Q R
$str55S ^
)55^ _
;55_ `
ViewData66 
[66 
$str66 !
]66! "
=66# $
new66% (

SelectList66) 3
(663 4
_context664 <
.66< =
Doctors66= D
,66D E
$str66F P
,66P Q
$str66R ^
)66^ _
;66_ `
ViewData77 
[77 
$str77 "
]77" #
=77$ %
new77& )

SelectList77* 4
(774 5
_context775 =
.77= >
Patients77> F
,77F G
$str77H S
,77S T
$str77U b
)77b c
;77c d
return88 
View88 
(88 
)88 
;88 
}99 	
[>> 	
HttpPost>>	 
]>> 
[?? 	$
ValidateAntiForgeryToken??	 !
]??! "
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
Create@@) /
(@@/ 0
[@@0 1
Bind@@1 5
(@@5 6
$str	@@6 Ñ
)
@@Ñ Ö
]
@@Ö Ü
appointment
@@á í
appointment
@@ì û
)
@@û ü
{AA 	
ifBB 
(BB 

ModelStateBB 
.BB 
IsValidBB "
)BB" #
{CC 
ifEE 
(EE 
appointmentEE 
.EE 
StatusofAppointEE .
==EE/ 1
$strEE2 4
||EE5 7
appointmentEE8 C
.EEC D
StatusofAppointEED S
==EET V
nullEEW [
)EE[ \
{FF 
returnGG 
RedirectToActionGG +
(GG+ ,
nameofGG, 2
(GG2 3
CreateGG3 9
)GG9 :
)GG: ;
;GG; <
}HH 
_contextJJ 
.JJ 
AddJJ 
(JJ 
appointmentJJ (
)JJ( )
;JJ) *
awaitKK 
_contextKK 
.KK 
SaveChangesAsyncKK /
(KK/ 0
)KK0 1
;KK1 2
returnLL 
RedirectToActionLL '
(LL' (
nameofLL( .
(LL. /
IndexLL/ 4
)LL4 5
)LL5 6
;LL6 7
}MM 
ViewDataNN 
[NN 
$strNN 
]NN  
=NN! "
newNN# &

SelectListNN' 1
(NN1 2
_contextNN2 :
.NN: ;
DoctorsNN; B
,NNB C
$strNND N
,NNN O
$strNNP Z
,NNZ [
appointmentNN\ g
.NNg h
DoctorIdNNh p
)NNp q
;NNq r
ViewDataOO 
[OO 
$strOO  
]OO  !
=OO" #
newOO$ '

SelectListOO( 2
(OO2 3
_contextOO3 ;
.OO; <
PatientsOO< D
,OOD E
$strOOF Q
,OOQ R
$strOOS ^
,OO^ _
appointmentOO` k
.OOk l
	PatientIdOOl u
)OOu v
;OOv w
returnPP 
ViewPP 
(PP 
appointmentPP #
)PP# $
;PP$ %
}QQ 	
publicTT 
asyncTT 
TaskTT 
<TT 
IActionResultTT '
>TT' (
EditTT) -
(TT- .
intTT. 1
?TT1 2
idTT3 5
)TT5 6
{UU 	
ifVV 
(VV 
idVV 
==VV 
nullVV 
)VV 
{WW 
returnXX 
NotFoundXX 
(XX  
)XX  !
;XX! "
}YY 
var[[ 
appointment[[ 
=[[ 
await[[ #
_context[[$ ,
.[[, -
Appointments[[- 9
.[[9 :
	FindAsync[[: C
([[C D
id[[D F
)[[F G
;[[G H
if\\ 
(\\ 
appointment\\ 
==\\ 
null\\ #
)\\# $
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
ViewData`` 
[`` 
$str`` !
]``! "
=``# $
new``% (

SelectList``) 3
(``3 4
_context``4 <
.``< =
Doctors``= D
,``D E
$str``F P
,``P Q
$str``R ^
)``^ _
;``_ `
ViewDataaa 
[aa 
$straa "
]aa" #
=aa$ %
newaa& )

SelectListaa* 4
(aa4 5
_contextaa5 =
.aa= >
Patientsaa> F
,aaF G
$straaH S
,aaS T
$straaU b
)aab c
;aac d
ViewDatabb 
[bb 
$strbb 
]bb  
=bb! "
newbb# &

SelectListbb' 1
(bb1 2
_contextbb2 :
.bb: ;
Doctorsbb; B
,bbB C
$strbbD N
,bbN O
$strbbP Z
,bbZ [
appointmentbb\ g
.bbg h
DoctorIdbbh p
)bbp q
;bbq r
ViewDatacc 
[cc 
$strcc  
]cc  !
=cc" #
newcc$ '

SelectListcc( 2
(cc2 3
_contextcc3 ;
.cc; <
Patientscc< D
,ccD E
$strccF Q
,ccQ R
$strccS ^
,cc^ _
appointmentcc` k
.cck l
	PatientIdccl u
)ccu v
;ccv w
returndd 
Viewdd 
(dd 
appointmentdd #
)dd# $
;dd$ %
}ee 	
[jj 	
HttpPostjj	 
]jj 
[kk 	$
ValidateAntiForgeryTokenkk	 !
]kk! "
publicll 
asyncll 
Taskll 
<ll 
IActionResultll '
>ll' (
Editll) -
(ll- .
intll. 1
idll2 4
,ll4 5
[ll6 7
Bindll7 ;
(ll; <
$str	ll< ä
)
llä ã
]
llã å
appointment
llç ò
appointment
llô §
)
ll§ •
{mm 	
ifnn 
(nn 
idnn 
!=nn 
appointmentnn !
.nn! "
AppointmentIdnn" /
)nn/ 0
{oo 
returnpp 
NotFoundpp 
(pp  
)pp  !
;pp! "
}qq 
ifss 
(ss 

ModelStatess 
.ss 
IsValidss "
)ss" #
{tt 
tryuu 
{vv 
ifxx 
(xx 
appointmentxx #
.xx# $
StatusofAppointxx$ 3
==xx4 6
$strxx7 9
||xx: <
appointmentxx= H
.xxH I
StatusofAppointxxI X
==xxY [
nullxx\ `
)xx` a
{yy 
returnzz 
RedirectToActionzz /
(zz/ 0
nameofzz0 6
(zz6 7
Editzz7 ;
)zz; <
)zz< =
;zz= >
}{{ 
_context}} 
.}} 
Update}} #
(}}# $
appointment}}$ /
)}}/ 0
;}}0 1
await~~ 
_context~~ "
.~~" #
SaveChangesAsync~~# 3
(~~3 4
)~~4 5
;~~5 6
} 
catch
ÄÄ 
(
ÄÄ *
DbUpdateConcurrencyException
ÄÄ 3
)
ÄÄ3 4
{
ÅÅ 
if
ÇÇ 
(
ÇÇ 
!
ÇÇ 
AppointmentExists
ÇÇ *
(
ÇÇ* +
appointment
ÇÇ+ 6
.
ÇÇ6 7
AppointmentId
ÇÇ7 D
)
ÇÇD E
)
ÇÇE F
{
ÉÉ 
return
ÑÑ 
NotFound
ÑÑ '
(
ÑÑ' (
)
ÑÑ( )
;
ÑÑ) *
}
ÖÖ 
else
ÜÜ 
{
áá 
throw
àà 
;
àà 
}
ââ 
}
ää 
return
ãã 
RedirectToAction
ãã '
(
ãã' (
nameof
ãã( .
(
ãã. /
Index
ãã/ 4
)
ãã4 5
)
ãã5 6
;
ãã6 7
}
åå 
ViewData
çç 
[
çç 
$str
çç 
]
çç  
=
çç! "
new
çç# &

SelectList
çç' 1
(
çç1 2
_context
çç2 :
.
çç: ;
Doctors
çç; B
,
ççB C
$str
ççD N
,
ççN O
$str
ççP Z
,
ççZ [
appointment
çç\ g
.
ççg h
DoctorId
ççh p
)
ççp q
;
ççq r
ViewData
éé 
[
éé 
$str
éé  
]
éé  !
=
éé" #
new
éé$ '

SelectList
éé( 2
(
éé2 3
_context
éé3 ;
.
éé; <
Patients
éé< D
,
ééD E
$str
ééF Q
,
ééQ R
$str
ééS ^
,
éé^ _
appointment
éé` k
.
éék l
	PatientId
éél u
)
ééu v
;
éév w
return
èè 
View
èè 
(
èè 
appointment
èè #
)
èè# $
;
èè$ %
}
êê 	
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
Delete
ìì) /
(
ìì/ 0
int
ìì0 3
?
ìì3 4
id
ìì5 7
)
ìì7 8
{
îî 	
if
ïï 
(
ïï 
id
ïï 
==
ïï 
null
ïï 
)
ïï 
{
ññ 
return
óó 
NotFound
óó 
(
óó  
)
óó  !
;
óó! "
}
òò 
var
öö 
appointment
öö 
=
öö 
await
öö #
_context
öö$ ,
.
öö, -
Appointments
öö- 9
.
õõ 
Include
õõ 
(
õõ 
a
õõ 
=>
õõ 
a
õõ 
.
õõ  
Doctor
õõ  &
)
õõ& '
.
úú 
Include
úú 
(
úú 
a
úú 
=>
úú 
a
úú 
.
úú  
Patient
úú  '
)
úú' (
.
ùù !
FirstOrDefaultAsync
ùù $
(
ùù$ %
m
ùù% &
=>
ùù' )
m
ùù* +
.
ùù+ ,
AppointmentId
ùù, 9
==
ùù: <
id
ùù= ?
)
ùù? @
;
ùù@ A
if
ûû 
(
ûû 
appointment
ûû 
==
ûû 
null
ûû #
)
ûû# $
{
üü 
return
†† 
NotFound
†† 
(
††  
)
††  !
;
††! "
}
°° 
return
££ 
View
££ 
(
££ 
appointment
££ #
)
££# $
;
££$ %
}
§§ 	
[
ßß 	
HttpPost
ßß	 
,
ßß 

ActionName
ßß 
(
ßß 
$str
ßß &
)
ßß& '
]
ßß' (
[
®® 	&
ValidateAntiForgeryToken
®®	 !
]
®®! "
public
©© 
async
©© 
Task
©© 
<
©© 
IActionResult
©© '
>
©©' (
DeleteConfirmed
©©) 8
(
©©8 9
int
©©9 <
id
©©= ?
)
©©? @
{
™™ 	
var
´´ 
appointment
´´ 
=
´´ 
await
´´ #
_context
´´$ ,
.
´´, -
Appointments
´´- 9
.
´´9 :
	FindAsync
´´: C
(
´´C D
id
´´D F
)
´´F G
;
´´G H
if
¨¨ 
(
¨¨ 
appointment
¨¨ 
!=
¨¨ 
null
¨¨ #
)
¨¨# $
{
≠≠ 
_context
ÆÆ 
.
ÆÆ 
Appointments
ÆÆ %
.
ÆÆ% &
Remove
ÆÆ& ,
(
ÆÆ, -
appointment
ÆÆ- 8
)
ÆÆ8 9
;
ÆÆ9 :
}
ØØ 
await
±± 
_context
±± 
.
±± 
SaveChangesAsync
±± +
(
±±+ ,
)
±±, -
;
±±- .
return
≤≤ 
RedirectToAction
≤≤ #
(
≤≤# $
nameof
≤≤$ *
(
≤≤* +
Index
≤≤+ 0
)
≤≤0 1
)
≤≤1 2
;
≤≤2 3
}
≥≥ 	
private
µµ 
bool
µµ 
AppointmentExists
µµ &
(
µµ& '
int
µµ' *
id
µµ+ -
)
µµ- .
{
∂∂ 	
return
∑∑ 
_context
∑∑ 
.
∑∑ 
Appointments
∑∑ (
.
∑∑( )
Any
∑∑) ,
(
∑∑, -
e
∑∑- .
=>
∑∑/ 1
e
∑∑2 3
.
∑∑3 4
AppointmentId
∑∑4 A
==
∑∑B D
id
∑∑E G
)
∑∑G H
;
∑∑H I
}
∏∏ 	
}
ππ 
}∫∫ 